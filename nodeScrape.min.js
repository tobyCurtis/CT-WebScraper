var request=require("request"),cheerio=require("cheerio"),jsonFormat=require("json-format"),fs=require("fs"),titles=[],imgUrl=[],author=[],price=[],books=[],holder="";request("https://origin-web-scraping.herokuapp.com",function(e,r,t){if(!e&&200==r.statusCode){var o=cheerio.load(t,{normalizeWhitespace:!0});o(".panel-heading").each(function(e,r){holder=o(this).text(),titles[e]=holder.trim()}),o(".panel-body img").each(function(e,r){imgUrl[e]=o(this).attr("src")}),o(".panel-body p").each(function(e,r){author[e]=o(this).text()}),o(".panel-body small").each(function(e,r){price[e]=o(this).text()});for(var i=0;i<titles.length;i++)books.push({name:titles[i],imageUrl:imgUrl[i],author:author[i],price:price[i]});fs.writeFile("books.json",jsonFormat(books),function(e){if(e)throw e})}});